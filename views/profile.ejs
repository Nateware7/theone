<%- include('partials/header') -%>

<body class="text-white flex flex-col min-h-screen  bg-customDark font-poppins">
    <!-- Header -->
    <header class="p-4 text-white flex items-center justify-between">
        <!-- Logo -->
        <div class="w-36 ml-5 mt-5">
            <a href="/"><img src="/css/imgs/myuncle.png" alt=""></a>
        </div>
    
        <!-- Icons for small screens (hidden on desktop) -->
        <div class="text-3xl space-x-4">
                <a href="/logout" class="text-red-500 mr-5">
                    <i class="fa-solid fa-right-from-bracket"></i>
                </a>
        </div>
    </header>

    <!-- Heading -->
    <h1 class="flex justify-center items-center text-white mt-10 mb-5 text-4xl sm:text-6xl" style="font-family: 'Poppins', serif;">Add Content</h1>

    <!-- Main Content -->
    <main class="flex-grow flex justify-center items-center px-4 pb-8">
        <div class="w-full max-w-5xl rounded-lg shadow sm:p-8 p-4 bg-customDark">

            <!-- Form Type Selection -->
<div class="mb-8">
    <label class="block mb-2 text-sm font-medium text-white" style="font-family: 'Poppins', serif;">Select Form Type</label>
    <div class="flex space-x-4">
      <label class="inline-flex items-center">
        <input type="radio" name="formType" value="user" class="hidden" onchange="toggleForm(this)" checked>
        <div class="form-selector p-3 rounded-lg cursor-pointer transition-all selected">
          User Content
        </div>
      </label>
      
      <label class="inline-flex items-center">
        <input type="radio" name="formType" value="program" class="hidden" onchange="toggleForm(this)">
        <div class="form-selector p-3 rounded-lg cursor-pointer transition-all">
          Program Content
        </div>
      </label>
    </div>
  </div>
            <!-- User Form -->

            <form id="user-form" class="space-y-6" action="/createFeedItem" method="POST">
                <!-- Platform Selection -->
                <div class="mb-4">
                    <label class="block mb-2 text-sm font-medium text-white" style="font-family: 'Poppins', serif;">
                        Select Platform
                    </label>
                    <div class="flex space-x-4">
                        <!-- Instagram Option -->
                        <!-- Instagram Option -->
<label class="inline-flex items-center">
    <input type="radio" name="platform" value="instagram" class="hidden" onchange="updatePlatformStyle(this)" checked>
    <div class="platform-selector p-3 rounded-lg cursor-pointer transition-all selected" data-platform="instagram">
        <img src="css/imgs/instagram.png" alt="Instagram" class="w-6 h-6">
    </div>
</label>

                        
                        <!-- X Option -->
                        <label class="inline-flex items-center">
                            <input type="radio" name="platform" value="x" class="hidden" onchange="updatePlatformStyle(this)">
                            <div class="platform-selector p-3 rounded-lg cursor-pointer transition-all" data-platform="x">
                                <img src="css/imgs/x.png" alt="X" class="w-6 h-6">
                            </div>
                        </label>
            
                        <!-- Discord Option -->
                        <label class="inline-flex items-center">
                            <input type="radio" name="platform" value="discord" class="hidden" onchange="updatePlatformStyle(this)">
                            <div class="platform-selector p-3 rounded-lg cursor-pointer transition-all" data-platform="discord">
                                <img src="css/imgs/discord.png" alt="Discord" class="w-6 h-6">
                            </div>
                        </label>
                    </div>
                </div>
            
                <div class="flex space-x-4">
                    <!-- Username Field -->
                    <div class="flex-1">
                        <label for="username" class="block mb-2 text-sm font-medium text-white" style="font-family: 'Poppins', serif;">Username</label>
                        <input type="text" name="username" id="username" class="text-white text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5" style="background-color: rgba(30, 28, 27, 255);" required>
                    </div>
                    <!-- Price Field -->
                    <div class="flex-1">
                        <label for="user-price" class="block mb-2 text-sm font-medium text-white" style="font-family: 'Poppins', serif;">Price ($)</label>
                        <input type="number" name="price" id="user-price" class="text-white text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5" style="background-color: rgba(30, 28, 27, 255);" required>
                    </div>
                </div>
                <!-- Description Field -->
                <div>
                    <label for="user-description" class="block mb-2 text-sm font-medium text-white" style="font-family: 'Poppins', serif;">Description</label>
                    <textarea name="description" id="user-description" maxlength="50" rows="2" class="text-white text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5" style="background-color: rgba(30, 28, 27, 255);" required></textarea>
                </div>
                <!-- Inside the user-form div -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <!-- Email Field -->
    <div>
      <label for="account-email" class="block mb-2 text-sm font-medium text-white">Account Email</label>
      <input type="email" name="email" id="account-email" 
             class="text-white text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5" 
             style="background-color: rgba(30, 28, 27, 255);" required>
    </div>
    
    <!-- Password Field -->
    <div>
      <label for="account-password" class="block mb-2 text-sm font-medium text-white">Account Password</label>
      <div class="relative">
        <input type="password" name="password" id="account-password" 
               class="text-white text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 pr-10" 
               style="background-color: rgba(30, 28, 27, 255);" required>
        <button type="button" onclick="togglePasswordVisibility()" 
                class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm">
          <i id="eye-icon" class="fas fa-eye-slash text-gray-400"></i>
        </button>
      </div>
    </div>
  </div>
                <!-- Submit Button -->
                <div class="flex justify-end">
                    <button type="submit" class="text-black bg-gray-200 font-medium rounded-lg text-sm px-5 py-2.5 text-center" style="font-family: 'Poppins', serif;">
                        Add Content
                    </button>
                </div>
            </form>
            
            <!-- Program Form -->
            <form id="program-form" class="space-y-6 hidden" action="/createProgramItem" method="POST" enctype="multipart/form-data">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="md:col-span-2">
                        <label for="title" class="block mb-2 text-sm font-medium text-white" style="font-family: 'Poppins', serif;">Program Title</label>
                        <input type="text" name="title" id="title" class="text-white text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5" style="background-color: rgba(30, 28, 27, 255);" required>
                    </div>
                    <div class="md:col-span-2">
                        <label for="description" class="block mb-2 text-sm font-medium text-white" style="font-family: 'Poppins', serif;">Description</label>
                        <textarea name="description" id="description" rows="3" class="text-white text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5" style="background-color: rgba(30, 28, 27, 255);" required></textarea>
                    </div>
                    <div>
                        <label for="program-price" class="block mb-2 text-sm font-medium text-white" style="font-family: 'Poppins', serif;">Price ($)</label>
                        <input type="number" name="price" id="program-price" class="text-white text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5" style="background-color: rgba(30, 28, 27, 255);" required>
                    </div>
                    <div>
                        <label for="tags" class="block mb-2 text-sm font-medium text-white" style="font-family: 'Poppins', serif;">Tags (comma-separated)</label>
                        <input type="text" name="tags" id="tags" class="text-white text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5" style="background-color: rgba(30, 28, 27, 255);" placeholder="e.g., JavaScript, Web, Tool">
                    </div>
                    <div class="md:col-span-2">
                        <label for="features" class="block mb-2 text-sm font-medium text-white" style="font-family: 'Poppins', serif;">Features (one per line)</label>
                        <textarea name="features" id="features" rows="4" class="text-white text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5" style="background-color: rgba(30, 28, 27, 255);" placeholder="Feature 1&#10;Feature 2&#10;Feature 3"></textarea>
                    </div>

                    <div class="md:col-span-2">
                        <label for="imageUpload" class="block mb-2 text-sm font-medium text-white" style="font-family: 'Poppins', serif;">Image Upload</label>
                        <input type="file" name="image" id="imageUpload" accept="image/*" class="text-white text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5" style="background-color: rgba(30, 28, 27, 255);">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block mb-2 text-sm font-medium text-white">
                          Program File (ZIP/PDF)
                        </label>
                        <input 
                          type="file" 
                          name="programFile" 
                          accept=".zip,.pdf"
                          class="text-white text-sm rounded-lg block w-full p-2.5"
                          style="background-color: rgba(30, 28, 27, 255);"
                          required
                        >
                      </div>
                    
                    <!-- Cropper Container (Hidden by default) -->
<div id="cropperContainer" class="hidden fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center">
    <div class="bg-black p-6 rounded-lg max-w-3xl w-full m-auto absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
        <h2 class="text-white text-xl mb-4 text-center" style="font-family: 'Poppins', serif;">Crop Your Image</h2>
        <div class="mb-4 flex justify-center items-center">
            <img id="imageToCrop" class="max-w-full max-h-[70vh] object-contain" src="" alt="Image to crop">
        </div>
        <div class="flex justify-center space-x-4">
            <button id="saveCroppedImage" class="bg-white text-black px-4 py-2 rounded">Save Crop</button>
            <button id="cancelCrop" class="bg-red-700 text-white px-4 py-2 rounded">Cancel</button>
        </div>
    </div>
</div>
                    <!-- Cropped Image Preview -->
                    <div id="finalImagePreview" class="hidden mt-4">
                        <h3 class="text-white mb-2" style="font-family: 'Poppins', serif;">Cropped Image Preview</h3>
                        <img id="croppedPreview" class="max-w-full rounded" src="" alt="Cropped image preview">
                    </div>
                </div>
                <div class="flex justify-end">
                    <button type="submit" class="text-black bg-gray-200 font-medium rounded-lg text-sm px-5 py-2.5 text-center" style="font-family: 'Poppins', serif;">
                        Add Program
                    </button>
                </div>
            </form>
            


            <!-- Preview Section (Only shown for users) -->
            <!-- Preview Section -->
            <div id="user-preview" class="mt-8">
                <h5 class="text-lg font-bold text-white mb-4">Account Preview</h5>
                <div class="bg-blue-800 p-4 rounded-lg space-y-2">
                  <div class="flex items-center justify-between">
                    <div class="flex items-center">
                      <img id="preview-platform" src="css/imgs/instagram.png" alt="Platform" class="w-8 h-8 mr-3">
                      <div>
                        <p id="preview-username" class="text-white font-medium"></p>
                        <p id="preview-email" class="text-gray-300 text-sm"></p>
                      </div>
                    </div>
                    <span id="preview-price" class="text-white font-bold"></span>
                  </div>
                  <p id="preview-description" class="text-gray-300 text-sm"></p>
                </div>
              </div>
              
    </main>
    <script src="/css/js/profile.js"></script>
    <script src="/css/js/imageCropper.js"></script>
</body>
</html>
<%- include('partials/footer') -%>